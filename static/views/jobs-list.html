<!--

    Copyright (c) 2013-2015 by The SeedStack authors. All rights reserved.

    This file is part of SeedStack, An enterprise-oriented full development stack.

    This Source Code Form is subject to the terms of the Mozilla Public
    License, v. 2.0. If a copy of the MPL was not distributed with this
    file, You can obtain one at http://mozilla.org/MPL/2.0/.

-->
<div>
    <div data-ng-show="!(authorization.hasPermission('seed-w20', ['seed', 'monitoring', 'batch', 'read']) && authentication.isAuthentifiable())" >
        <div class="alert alert-warning alert-dismissable">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <strong>{{ "application.view.batch.warning" | localize }}</strong> {{ "application.view.batch.accessdenied"
            | localize }}
        </div>
    </div>
    <div class="seed-batch container-fluid"
         data-ng-show="authorization.hasPermission('seed-w20', ['seed', 'monitoring', 'batch', 'read']) && authentication.isAuthentifiable()"
         data-on-resize data-do="resizeGrids()">
        <!-- HEADER -->
        <div class="row">
            <div class="col-md-12">
                <h1 class="seed-batch-header">
                    <i class="fa fa-dashboard"></i> {{ "application.view.batch.maintitle" | localize }}
                </h1>
                <div data-breadcrumb data-base-path="batch/jobs-list"></div>
            </div>
        </div>
        <div class="row">
            <!-- MAPS OF JOBS -->
            <div class="col-md-6" id="batch-map" data-ng-if="showMap">
                <h4>{{ 'application.view.batch.batchmap' | localize }} <strong>{{ selectedJob[0].name }}</strong></h4>
                <div id="batch-map-panel">
                    <div>
                        <div data-batch-map data-job="{{ selectedJob[0].name }}" class="batch-map-diagram"></div>
                    </div>
                </div>
            </div>
            <!-- JOBS LIST -->
            <div class="col-md-6">
                <h4>{{ 'application.view.batch.jobtabletitle' | localize }}</h4>
                <div data-ui-grid="jobsListOptions" data-ui-grid-selection data-ui-grid-pagination data-ui-grid-auto-resize></div>
            </div>
            <!-- CHART (OVERALL PROGRESS) -->
            <div class="col-md-6">
                <h4>{{ "application.view.batch.overallprogress" | localize }} <strong>{{ selectedJob[0].name }}</strong></h4>
                <div id="pieChart" data-w20-pie-chart="pieConfig"></div>
            </div>
        </div>
    </div>
</div>